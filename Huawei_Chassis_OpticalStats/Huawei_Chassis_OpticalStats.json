{
  "id" : 89908421,
  "description" : "Monitors optical module statistics such as temperature, voltage, signal strength, and admin state.",
  "group" : "",
  "appliesTo" : "hasCategory(\"Huawei\")",
  "technology" : "User may wish to filter out instances which display negative values for Voltage. A filter can be added: \n\n1.3.6.1.4.1.2011.5.25.31.1.1.3.1.6.##WILDVALUE## ; GreaterThan ; 0",
  "tags" : "huawei,chassis,optical",
  "checksum" : "d3aa20274996968226ba983a1740af6f",
  "lineageId" : "uKPqeqcnTkeBUlK7IcHrvw",
  "name" : "Huawei_Chassis_OpticalStats",
  "displayName" : "Huawei Chassis Optical Stats",
  "version" : 1590021321,
  "auditVersion" : 0,
  "hasMultiInstances" : true,
  "collectInterval" : 180,
  "collectMethod" : "snmp",
  "collectorAttribute" : {
    "name" : "snmp",
    "ip" : "dns"
  },
  "enableAutoDiscovery" : true,
  "autoDiscoveryConfig" : {
    "persistentInstance" : false,
    "disableInstance" : false,
    "deleteInactiveInstance" : false,
    "instanceAutoGroupMethod" : "none",
    "instanceAutoGroupMethodParams" : "",
    "scheduleInterval" : 60,
    "method" : {
      "name" : "ad_script",
      "type" : "embeded",
      "winScript" : null,
      "winCmdline" : null,
      "linuxCmdline" : null,
      "linuxScript" : null,
      "groovyScript" : "/*******************************************************************************\n *  Â© 2007-2020 - LogicMonitor, Inc. All rights reserved.\n ******************************************************************************/\n\nimport com.santaba.agent.groovyapi.snmp.Snmp\n\n// variable to hold system hostname\ndef host = hostProps.get('system.hostname')\ndef props = hostProps.toProperties()\ndef timeout = 100000 \ndef instanceMap = [:]\n\n\n\n\nSnmp.walkAsMap(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.3.1.1\", null, 30000).each { key, mode ->\n    def tx = Snmp.get(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.3.1.9.$key\")\n    def vol = Snmp.get(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.3.1.6.$key\")\n    mode = mode.trim()\n\n    if (tx != \"-1\" && vol != \"-1\" && mode != \"1\") {\n\n        def serial_no = Snmp.get(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.3.1.4.$key\").trim()\n        def name = Snmp.get(host, \"1.3.6.1.2.1.47.1.1.1.1.7.$key\").trim()\n        def mfg = Snmp.get(host, \"1.3.6.1.2.1.47.1.1.1.1.12.$key\").trim()\n\n\n        // Collect properties\n        def instance_props = [\n            'auto.optical.mode'               : mode,\n            'auto.optical.mfg'                : mfg,\n            'auto.optical.serial'             : serial_no\n        ]\n\n        // Optional properties, not consistent enough to be relied on to return on every host\n        // Instead if we get a value for them we keep them, if not we continue on. \n        try {\n            def pType = Snmp.get(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.1.1.20.$key\").trim().orElse(\"\")\n            def type = Snmp.get(host, \"1.3.6.1.2.1.47.1.1.1.1.10.$key\").trim().orElse(\"\")\n            def fType = Snmp.get(host, \"1.3.6.1.4.1.2011.5.25.31.1.1.3.1.12.$key\").trim()orElse(\"\")\n\n            if (fType) {\n                instance_props[\"auto.optical.fType\"] = fType\n            } \n\n            if (type) {\n                instance_props[\"auto.optical.type\"] = type\n            }\n\n            if (pType) {\n                instance_props[\"auto.optical.pType\"] = pType\n            }\n        }\n        catch (Exception e) {\n            // continue on \n        }\n        // Encode our properties\n        def encoded_instance_props_array = instance_props.collect()\n                { property, value ->\n                    URLEncoder.encode(property.toString()) + \"=\" + URLEncoder.encode(value.toString())\n                }\n\n        // Write instances with props\n        println \"$key##$name##$serial_no####\" + encoded_instance_props_array.join(\"&\")\n    }\n\n}\n\nreturn 0\n"
    },
    "filters" : [ ]
  },
  "dataPoints" : [ {
    "id" : 21490,
    "dataSourceId" : 89908421,
    "name" : "AdminStatus",
    "description" : "Represents the various possible administrative status codes.\n\nStatus Codes:\n\t\n1 = notSupported\n2 = locked\n3 = shuttingDown\n4 = unlocked\n11 = up\n12 = down\n13 = loopback",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "13",
    "minValue" : "1",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.1.1.1.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21491,
    "dataSourceId" : 89908421,
    "name" : "BiasCurrent",
    "description" : "Bias Current",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "expression",
    "postProcessorParam" : "BiasCurrentMicroamps/1000",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "0",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21492,
    "dataSourceId" : 89908421,
    "name" : "BiasCurrentMicroamps",
    "description" : "The bias current of the optical module. Unit: microamps.",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "0",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.7.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21493,
    "dataSourceId" : 89908421,
    "name" : "Mode",
    "description" : "Represents the various possible administrative states.\n\nStatus Codes:\n\n1 = notSupported\n2 = singleMode\n3 = multiMode5\n4 = multiMode6\n5 = noValue",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "5",
    "minValue" : "1",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.1.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21494,
    "dataSourceId" : 89908421,
    "name" : "OperatingState",
    "description" : "Represents the possible values of operational status codes: \n\n1 = notSupported\n2 = disabled\n3 = enabled\n4 = offline \n11 = up\n12 = down\n13 = connect\n15 = protocolUp\n16 = linkUp\t \n17 = linkDown",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "17",
    "minValue" : "1",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.1.1.2.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "The operation status of ##HOST## is no longer in an enabled. The current state is ##VALUE##, placing the device into ##LEVEL## state. \n\nStatus codes:\n\n1 = notSupported\n2 = disabled\n3 = enabled\n4 = offline \n11 = up\n12 = down\n13 = connect\n15 = protocolUp\n16 = linkUp\t \n17 = linkDown\n\nThis started at ##START##, -- or ##DURATION## ago.",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21495,
    "dataSourceId" : 89908421,
    "name" : "ReceivedPower",
    "description" : "Receive power of the optical module in decibel-milliwatts",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "expression",
    "postProcessorParam" : "RxPower/100",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21496,
    "dataSourceId" : 89908421,
    "name" : "RxPower",
    "description" : "The receive power of the optical module. Unit: dBm.\n\nBy default, Huawei expands the value of this OID 100 times, so the real value is stored in ReceivedPower.",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.8.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21497,
    "dataSourceId" : 89908421,
    "name" : "Temperature",
    "description" : "Current Temperature for entity measured in degrees Celsius.",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.5.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21498,
    "dataSourceId" : 89908421,
    "name" : "TransmitPower",
    "description" : "Transmit power of the optical module in decibel-milliwatts",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "expression",
    "postProcessorParam" : "TxPower/100",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21499,
    "dataSourceId" : 89908421,
    "name" : "TxPower",
    "description" : "The receive power of the optical module. Unit: dBm.\n\nBy default, Huawei expands the value of this OID 100 times, so the real value is stored in TransmitPower.",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.9.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21500,
    "dataSourceId" : 89908421,
    "name" : "Voltage",
    "description" : "The current voltage of the optical module. Unit: mV.",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "none",
    "postProcessorParam" : "",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "0",
    "userParam1" : "1.3.6.1.4.1.2011.5.25.31.1.1.3.1.6.##WILDVALUE##",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  }, {
    "id" : 21501,
    "dataSourceId" : 89908421,
    "name" : "Volts",
    "description" : "Datapoint used for translating millivolts into volts",
    "alertTransitionInterval" : 0,
    "alertClearTransitionInterval" : 0,
    "type" : 2,
    "dataType" : 7,
    "maxDigits" : 4,
    "postProcessorMethod" : "expression",
    "postProcessorParam" : "Voltage/1000",
    "rawDataFieldName" : "",
    "maxValue" : "",
    "minValue" : "",
    "userParam1" : "",
    "userParam2" : "",
    "userParam3" : "",
    "alertForNoData" : 1,
    "alertExpr" : "",
    "alertExprNote" : "",
    "alertSubject" : "",
    "alertBody" : "",
    "enableAnomalyAlertSuppression" : "",
    "adAdvSettingEnabled" : false,
    "warnAdAdvSetting" : "",
    "errorAdAdvSetting" : "",
    "criticalAdAdvSetting" : ""
  } ],
  "enableEriDiscovery" : false,
  "eriDiscoveryInterval" : -1,
  "eriDiscoveryConfig" : null
}